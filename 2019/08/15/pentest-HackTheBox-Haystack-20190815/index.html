
 <!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Inconsolata:400">
    <title>pentest HackTheBox Haystack 20190815 | FlamePeak</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="FlamePeak">
    

    
    <meta name="description" content="一、nmap扫描 二、binwalk查找隐藏数据 三、strings查找字符串 最后一行base64加密 四、base64解密 la aguja en el pajar es &amp;quot;clave&amp;quot; (西班牙语)翻译为英语：the needle in the haystack is &amp;quot;key&amp;quot;  五、 访问9200端口9200端口是ElasticSearch，关于E">
<meta name="keywords" content="HackTheBox">
<meta property="og:type" content="article">
<meta property="og:title" content="pentest HackTheBox Haystack 20190815">
<meta property="og:url" content="http://flamepeak.com/2019/08/15/pentest-HackTheBox-Haystack-20190815/index.html">
<meta property="og:site_name" content="FlamePeak">
<meta property="og:description" content="一、nmap扫描 二、binwalk查找隐藏数据 三、strings查找字符串 最后一行base64加密 四、base64解密 la aguja en el pajar es &amp;quot;clave&amp;quot; (西班牙语)翻译为英语：the needle in the haystack is &amp;quot;key&amp;quot;  五、 访问9200端口9200端口是ElasticSearch，关于E">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://flamepeak.com/sourcepictures/2019/08/15/1.png">
<meta property="og:image" content="http://flamepeak.com/sourcepictures/2019/08/15/2.png">
<meta property="og:image" content="http://flamepeak.com/sourcepictures/2019/08/15/3.png">
<meta property="og:image" content="http://flamepeak.com/sourcepictures/2019/08/15/4.png">
<meta property="og:image" content="http://flamepeak.com/sourcepictures/2019/08/15/6.png">
<meta property="og:image" content="http://flamepeak.com/sourcepictures/2019/08/15/7.png">
<meta property="og:updated_time" content="2019-08-15T07:57:20.770Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="pentest HackTheBox Haystack 20190815">
<meta name="twitter:description" content="一、nmap扫描 二、binwalk查找隐藏数据 三、strings查找字符串 最后一行base64加密 四、base64解密 la aguja en el pajar es &amp;quot;clave&amp;quot; (西班牙语)翻译为英语：the needle in the haystack is &amp;quot;key&amp;quot;  五、 访问9200端口9200端口是ElasticSearch，关于E">
<meta name="twitter:image" content="http://flamepeak.com/sourcepictures/2019/08/15/1.png">

    
    <link rel="alternative" href="/atom.xml" title="FlamePeak" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
  <meta name="google-site-verification" content="rYNq4pSdFJQ3Ir4VuV4A6TqVEEUP8o-rrwmST28FhQY">
  <meta name="baidu-site-verification" content="AL6EYSh1WZ">
</head>
</html>
  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="FlamePeak">FlamePeak</a></h1>
				<h2 class="blog-motto">We know something, but we do not know more.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/notes">Notes</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:flamepeak.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/08/15/pentest-HackTheBox-Haystack-20190815/" title="pentest HackTheBox Haystack 20190815" itemprop="url">pentest HackTheBox Haystack 20190815</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="FlamePeak" target="_blank" itemprop="author">FlamePeak</a>
		
  <p class="article-time">
    <time datetime="2019-08-15T03:13:42.000Z" itemprop="datePublished"> Published 2019-08-15</time>
    
  </p>
</header>
	<div class="article-content">
		
		<h3 id="一、nmap扫描"><a href="#一、nmap扫描" class="headerlink" title="一、nmap扫描"></a>一、nmap扫描</h3><p><img src="/sourcepictures/2019/08/15/1.png" alt="nmap"></p>
<h3 id="二、binwalk查找隐藏数据"><a href="#二、binwalk查找隐藏数据" class="headerlink" title="二、binwalk查找隐藏数据"></a>二、binwalk查找隐藏数据</h3><p><img src="/sourcepictures/2019/08/15/2.png" alt="binwalk"></p>
<h3 id="三、strings查找字符串"><a href="#三、strings查找字符串" class="headerlink" title="三、strings查找字符串"></a>三、strings查找字符串</h3><p><img src="/sourcepictures/2019/08/15/3.png" alt="strings"></p>
<p>最后一行base64加密</p>
<h3 id="四、base64解密"><a href="#四、base64解密" class="headerlink" title="四、base64解密"></a>四、base64解密</h3><p><img src="/sourcepictures/2019/08/15/4.png" alt="b64decode"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">la aguja en el pajar es &quot;clave&quot; (西班牙语)</span><br><span class="line">翻译为英语：the needle in the haystack is &quot;key&quot;</span><br></pre></td></tr></table></figure>

<h3 id="五、-访问9200端口"><a href="#五、-访问9200端口" class="headerlink" title="五、 访问9200端口"></a>五、 访问9200端口</h3><p>9200端口是ElasticSearch，关于ElasticSearch命令用法可以参考<a href="https://www.bmc.com/blogs/elasticsearch-commands/" target="_blank" rel="noopener">ElasticSearch Commands Cheat Sheet</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. delete index</span><br><span class="line">Below the index is named samples.</span><br><span class="line"></span><br><span class="line">curl -X DELETE &apos;http://localhost:9200/samples&apos;</span><br><span class="line"></span><br><span class="line">2. list all indexes</span><br><span class="line">curl -X GET &apos;http://localhost:9200/_cat/indices?v&apos;</span><br><span class="line"></span><br><span class="line">3. list all docs in index</span><br><span class="line">curl -X GET &apos;http://localhost:9200/sample/_search&apos;</span><br><span class="line"></span><br><span class="line">4. query using URL parameters</span><br><span class="line">Here we use Lucene query format to write q=school:Harvard.</span><br><span class="line"></span><br><span class="line">curl -X GET http://localhost:9200/samples/_search?q=school:Harvard</span><br><span class="line"></span><br><span class="line">5. Query with JSON aka Elasticsearch Query DSL</span><br><span class="line">You can query using parameters on the URL. But you can also use JSON, as shown in the next example. JSON would be easier to read and debug when you have a complex query than one giant string of URL parameters.</span><br><span class="line"></span><br><span class="line">curl -XGET --header &apos;Content-Type: application/json&apos; http://localhost:9200/samples/_search -d &apos;&#123;</span><br><span class="line">      &quot;query&quot; : &#123;</span><br><span class="line">        &quot;match&quot; : &#123; &quot;school&quot;: &quot;Harvard&quot; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&apos;</span><br><span class="line"></span><br><span class="line">6. list index mapping</span><br><span class="line">All Elasticsearch fields are indexes. So this lists all fields and their types in an index.</span><br><span class="line"></span><br><span class="line">curl -X GET http://localhost:9200/samples</span><br><span class="line"></span><br><span class="line">7. Add Data</span><br><span class="line">curl -XPUT --header &apos;Content-Type: application/json&apos; http://localhost:9200/samples/_doc/1 -d &apos;&#123;</span><br><span class="line">   &quot;school&quot; : &quot;Harvard&quot;			</span><br><span class="line">&#125;&apos;</span><br><span class="line"></span><br><span class="line">8. Update Doc</span><br><span class="line">Here is how to add fields to an existing document. First we create a new one. Then we update it. </span><br><span class="line"></span><br><span class="line">curl -XPUT --header &apos;Content-Type: application/json&apos; http://localhost:9200/samples/_doc/2 -d &apos;</span><br><span class="line">&#123;</span><br><span class="line">    &quot;school&quot;: &quot;Clemson&quot;</span><br><span class="line">&#125;&apos;</span><br><span class="line"></span><br><span class="line">curl -XPOST --header &apos;Content-Type: application/json&apos; http://localhost:9200/samples/_doc/2/_update -d &apos;&#123;</span><br><span class="line">&quot;doc&quot; : &#123;</span><br><span class="line">               &quot;students&quot;: 50000&#125;</span><br><span class="line">&#125;&apos;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">9. backup index</span><br><span class="line">curl -XPOST --header &apos;Content-Type: application/json&apos; http://localhost:9200/_reindex -d &apos;&#123;</span><br><span class="line">  &quot;source&quot;: &#123;</span><br><span class="line">    &quot;index&quot;: &quot;samples&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dest&quot;: &#123;</span><br><span class="line">    &quot;index&quot;: &quot;samples_backup&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&apos;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">10. Bulk load data in JSON format</span><br><span class="line">export pwd=&quot;elastic:&quot;</span><br><span class="line"></span><br><span class="line">curl --user $pwd  -H &apos;Content-Type: application/x-ndjson&apos; -XPOST &apos;https://58571402f5464923883e7be42a037917.eu-central-1.aws.cloud.es.io:9243/0/_bulk?pretty&apos; --data-binary @&lt;file&gt;</span><br><span class="line"></span><br><span class="line">11. Show cluster health</span><br><span class="line">curl --user $pwd  -H &apos;Content-Type: application/json&apos; -XGET https://58571402f5464923883e7be42a037917.eu-central-1.aws.cloud.es.io:9243/_cluster/health?pretty</span><br><span class="line"></span><br><span class="line">12. Aggregation and Bucket Aggregation</span><br><span class="line">For an nginx web server this produces web hit counts by user city:</span><br><span class="line"></span><br><span class="line">curl -XGET --user $pwd --header &apos;Content-Type: application/json&apos;  https://58571402f5464923883e7be42a037917.eu-central-1.aws.cloud.es.io:9243/logstash/_search?pretty -d &apos;&#123;</span><br><span class="line">        &quot;aggs&quot;: &#123;</span><br><span class="line">             &quot;cityName&quot;: &#123;</span><br><span class="line">                    &quot;terms&quot;: &#123;</span><br><span class="line">                     &quot;field&quot;: &quot;geoip.city_name.keyword&quot;,</span><br><span class="line">                                &quot;size&quot;: 50</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&apos;</span><br><span class="line"></span><br><span class="line">This expands that to product response code count by city in an nginx web server log</span><br><span class="line"></span><br><span class="line">curl -XGET --user $pwd --header &apos;Content-Type: application/json&apos;  https://58571402f5464923883e7be42a037917.eu-central-1.aws.cloud.es.io:9243/logstash/_search?pretty -d &apos;&#123;</span><br><span class="line">        &quot;aggs&quot;: &#123;</span><br><span class="line">          &quot;city&quot;: &#123;</span><br><span class="line">                &quot;terms&quot;: &#123;</span><br><span class="line">                        &quot;field&quot;: &quot;geoip.city_name.keyword&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">        &quot;aggs&quot;: &#123;</span><br><span class="line">          &quot;responses&quot;: &#123;</span><br><span class="line">                &quot;terms&quot;: &#123;</span><br><span class="line">                     &quot;field&quot;: &quot;response&quot;</span><br><span class="line">                 &#125;</span><br><span class="line">           &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;responses&quot;: &#123;</span><br><span class="line">                &quot;terms&quot;: &#123;</span><br><span class="line">                     &quot;field&quot;: &quot;response&quot;</span><br><span class="line">                 &#125;</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;&apos;</span><br></pre></td></tr></table></figure>

<p>访问结果：<br><img src="/sourcepictures/2019/08/15/6.png" alt="elasticsearch1"></p>
<p><img src="/sourcepictures/2019/08/15/7.png" alt="elasticsearch2"></p>
<hr>
<h2 id="屌丝水平有限，卡在这里，等有时间再琢磨"><a href="#屌丝水平有限，卡在这里，等有时间再琢磨" class="headerlink" title="屌丝水平有限，卡在这里，等有时间再琢磨"></a>屌丝水平有限，卡在这里，等有时间再琢磨</h2>  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Network-Security/">Network Security</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/HackTheBox/">HackTheBox</a>
  </div>

</div>


	<div class="article-share" id="share">
	
	  <div data-url="http://flamepeak.com/2019/08/15/pentest-HackTheBox-Haystack-20190815/" data-title="pentest HackTheBox Haystack 20190815 | FlamePeak" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2019/09/21/How-to-get-rich-without-getting-lucky-20190921/" title="How to get rich without getting lucky 20190921">
  <strong>上一篇：</strong><br/>
  <span>
  How to get rich without getting lucky 20190921</span>
</a>
</div>


<div class="next">
<a href="/2019/08/14/pentest-HackTheBox-swagshop-20190814/"  title="pentest HackTheBox swagshop 20190814">
 <strong>下一篇：</strong><br/> 
 <span>pentest HackTheBox swagshop 20190814
</span>
</a>
</div>

</nav>

	

</div>  

      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、nmap扫描"><span class="toc-number">1.</span> <span class="toc-text">一、nmap扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、binwalk查找隐藏数据"><span class="toc-number">2.</span> <span class="toc-text">二、binwalk查找隐藏数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、strings查找字符串"><span class="toc-number">3.</span> <span class="toc-text">三、strings查找字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、base64解密"><span class="toc-number">4.</span> <span class="toc-text">四、base64解密</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、-访问9200端口"><span class="toc-number">5.</span> <span class="toc-text">五、 访问9200端口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#屌丝水平有限，卡在这里，等有时间再琢磨"><span class="toc-number"></span> <span class="toc-text">屌丝水平有限，卡在这里，等有时间再琢磨</span></a>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/Android/" title="Android">Android<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Cryptography/" title="Cryptography">Cryptography<sup>15</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hardware/" title="Hardware">Hardware<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Life/" title="Life">Life<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>41</sup></a></li>
		  
		
		  
			<li><a href="/categories/Network-Security/" title="Network Security">Network Security<sup>19</sup></a></li>
		  
		
		  
			<li><a href="/categories/Python/" title="Python">Python<sup>38</sup></a></li>
		  
		
		  
			<li><a href="/categories/Tools/" title="Tools">Tools<sup>17</sup></a></li>
		  
		
		  
			<li><a href="/categories/Web前端/" title="Web前端">Web前端<sup>20</sup></a></li>
		  
		
		  
			<li><a href="/categories/Web后端/" title="Web后端">Web后端<sup>13</sup></a></li>
		  
		
		  
			<li><a href="/categories/人工智能/" title="人工智能">人工智能<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/百家杂谈/" title="百家杂谈">百家杂谈<sup>21</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Python/" title="Python">Python<sup>41</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>32</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C">C<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/笔记/" title="笔记">笔记<sup>18</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/cryptography/" title="cryptography">cryptography<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Life/" title="Life">Life<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/Network-Security/" title="Network Security">Network Security<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Mysql/" title="Mysql">Mysql<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Docker/" title="Docker">Docker<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Kali/" title="Kali">Kali<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Scrapy/" title="Scrapy">Scrapy<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/VPN/" title="VPN">VPN<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Learning/" title="Learning">Learning<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/HackTheBox/" title="HackTheBox">HackTheBox<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Chrome/" title="Chrome">Chrome<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/人生/" title="人生">人生<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Tips/" title="Tips">Tips<sup>3</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://laod.cn/hosts/2017-google-hosts.html" target="_blank" title="Google Hosts">Google Hosts</a>
            
          </li>
        
          <li>
            
            	<a href="http://overapi.com" target="_blank" title="OverAPI">OverAPI</a>
            
          </li>
        
          <li>
            
            	<a href="https://devdocs.io" target="_blank" title="DevDocs">DevDocs</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>

    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 善良   善学   勇敢   坚毅 <br/>
			努力   克制   谦虚   执着</p>
	</section>
	 
	<div id="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">Hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2020 
		
		<a href="/about" target="_blank" title="FlamePeak">FlamePeak</a>
		
		





		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          $('#toc.toc-aside').css('display', 'block');
          c.click();
        }
  
  $(window).resize(function(){
    getSize();
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
      
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});
</script>











<!-- Analytics Begin -->
<!--%- partial('analytics') %-->
<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>

